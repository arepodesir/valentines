---
import Layout from "../layouts/Layout.astro";
import App from "../components/App";
import { getAllLetters } from "../lib/letters";

export async function getStaticPaths() {
    const letters = getAllLetters();
    return letters.map((letter) => ({
        params: { slug: letter.slug },
        props: { confPath: `/letters/${letter.slug}.conf` },
    }));
}

const { slug } = Astro.params;
const { confPath } = Astro.props;
---

<Layout
    title={`Message for You - Hearth`}
    description="A personal 3D message waiting for you."
>
    <main class="w-full h-[100dvh] overflow-hidden bg-black text-white">
        <App client:only="solid-js" slug={slug} confPath={confPath} />
    </main>
</Layout>

<script is:inline>
    // Add letter-mode class to body for UI adjustments
    document.body.classList.add("letter-mode");
</script>
